ОБЩИЕ ПАТТЕРНЫ СОСТОЯНИЙ

Загрузка (loading)
– Используем:
– индикатор (крутилка) в центре или skeleton-плейсхолдеры списков;
– по возможности показываем контент “из кеша”, а поверх – маленький индикатор “обновляем данные”.

Ошибка
– Общий баннер наверху экрана:
– фон: мягко-красный / оранжевый;
– текст: коротко и по делу;
– кнопка "Повторить" (если уместно).
– Для критической ошибки:
– крупный блок в центре с иконкой и текстом;
– кнопка "Повторить" или "Назад".

Пустое состояние (empty state)
– Иконка / иллюстрация + короткий текст, объясняющий, что сейчас пусто;
– Обязательно – кнопка действия (например, "Добавить вещь", "Сделать фото").

Оффлайн / нет доступа к NAS
– Маленькая полоска/баннер под заголовком:
– "Нет соединения с NAS. Показываю сохранённые данные."
– Кнопка "Повторить" рядом или иконка “обновить”.

ГЛАВНЫЙ ЭКРАН – СОСТОЯНИЯ

Состояние 1: Загрузка
+------------------------------------------------+
| ГдеМоё [NAS: …] |
+------------------------------------------------+
| [ Плитки действий отображаются сразу ] |
| но: |
| – плитка "Надо проверить (…)" показывает |
| [Загрузка…] вместо числа X |
| – блок "Недавние вещи": |
| [ skeleton-карточки 1-2-3 ] |
+------------------------------------------------+

Состояние 2: Пустые данные (новый пользователь)
– Плитки действий есть (активны).
– Блок "Недавние вещи" заменяем на пустое состояние:

"Недавние вещи"
[ Иконка коробки с вопросом ]
"Вы еще не добавили ни одной вещи."
[ КНОПКА: "Добавить первую вещь" ]

Состояние 3: Ошибка доступа к NAS
– В верхней части под заголовком:

[БАННЕР]
"Не удалось подключиться к NAS."
[ Повторить ] [ Подробнее ]

– Иконка NAS в шапке меняется на статус "⚠".

Плитки “Добавить вручную”, “Места хранения” – работают от локального кеша.
Действия, требующие синхронизации (например, отправка фото на анализ) – при нажатии показывают локальное сообщение:
"Нет связи с NAS. Я выполняю это действие, как только подключение появится."
Или блокируем с понятным текстом.

ДОБАВЛЕНИЕ ВЕЩИ ВРУЧНУЮ – СОСТОЯНИЯ

Состояние 1: Обычное
– Кнопка "Сохранить" неактивна, пока не заполнено поле "Название".
– При выборе местоположения, если еще не выбрано, под полем короткий серый текст:
"Лучше указать местоположение – потом проще найти."

Состояние 2: Загрузка / сохранение
После нажатия "Сохранить":

– Кнопка "Сохранить" меняется на:
[СОХРАНЯЕМ…] (неактивна, с индикатором).
– Остальные поля временно блокируются.
– При успешном сохранении:
– короткий “тост” внизу: "Вещь сохранена".
– переход либо на карточку вещи, либо обратно на список (в зависимости от сценария).

Состояние 3: Ошибка сохранения
Если сохранение на бэкенд/NAS не удалось:

– Вверху формы:
[БАННЕР]
"Не удалось сохранить вещь. Проверьте соединение."
[Повторить]

– Внизу:
– кнопка "Сохранить" снова активна.
– Внутри можно подсветить поля, если ошибка связана с валидацией.

Состояние 4: Пустое местоположение
– Если пользователь пытается сохранить без местоположения – это допустимо, но можно:

Всплывающий мини-диалог:
"Сохранить без местоположения?
Потом вещь можно будет привязать к месту."
[ Сохранить ] [ Указать место ]

ВЫБОР МЕСТОПОЛОЖЕНИЯ – СОСТОЯНИЯ

Состояние 1: Загрузка узла
– При переходе на новый уровень (например, в комнату):

Отображаем:
"Загружаем список…" и 2–3 пустых строки-линии (skeleton).

Состояние 2: Пустой уровень
Пример: у дома ещё нет ни одной комнаты.

Список:
[ Иконка комнаты/папки с плюсиком ]
"Здесь пока ничего нет."
[ КНОПКА: "+ Добавить комнату" ]

Состояние 3: Ошибка подгрузки
[БАННЕР]
"Не удалось получить список мест."
[Повторить]

Если ошибка критическая (вообще нет данных и нет кеша), в центре:
[ Иконка ошибки ]
"Сейчас не могу загрузить местоположения."
[Повторить] [Назад]

"ДОБАВИТЬ ПО ФОТО/ВИДЕО" – СОСТОЯНИЯ

Экран камеры:

Состояние 1: Нет доступа к камере
Вместо превью:

[ Иконка камеры со знаком "x" ]
"Нет доступа к камере. Разрешите доступ в настройках."
[ ОТКРЫТЬ НАСТРОЙКИ ] [ ОТМЕНА ]

Состояние 2: Загрузка / подготовка камеры
Коротко:
"Подготавливаю камеру…" + крутилка, затем показ превью.

Экран подтверждения медиа:

Состояние 3: Отправка на анализ
После нажатия "Отправить на анализ":

– Кнопка меняется на:
[ОТПРАВЛЯЕМ…] (с индикатором, неактивна).
– Поле местоположения блокируется.
– При успехе:
– "Медиа отправлено на анализ. Результаты появятся в 'Надо проверить'."
– Возврат на главный или на “Проверка”.

Состояние 4: Ошибка отправки
[БАННЕР]
"Не удалось отправить медиа на анализ."
[Повторить] [Отмена]

Если медиа слишком тяжёлое / ошибка формата:
"Медиа слишком большое. Попробуйте сделать более короткое видео или фото."

"НАДО ПРОВЕРИТЬ" – СПИСОК И КАНДИДАТ

Список:

Состояние 1: Загрузка кандидатов
– Сразу после входа:

[ Режим: (● Список) (○ По одному) ]
Под ним – несколько строк skeleton:
[ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ ]
[ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ ]

Состояние 2: Пустой список
Если нет кандидатов:

[ Иконка "галочка" или чистый лист ]
"Нет элементов, которые надо проверить."
"ИИ ничего нового не нашёл."
[ КНОПКА: "Добавить по фото" ]

Состояние 3: Ошибка загрузки
[БАННЕР]
"Не удалось загрузить список на проверку."
[Повторить]

Экран кандидата по одному:

Состояние 4: Загрузка содержания (если надо догрузить детали)
– Крупное фото – skeleton-заглушка.
– Блок совпадений – текст "Подбираю похожие вещи…".

Состояние 5: Нет предложенных совпадений
В блоке "Это существующая вещь" показываем:

"Совпадения не найдены."
– Кнопка "Выбрать вручную" → диалог/экран поиска по названию.
– Пункт "Скорее всего, это новая вещь" – подсказка.

Состояние 6: Ошибка обновления кандидата
После нажатия "Подтвердить":

Если не удалось сохранить:
[БАННЕР]
"Не удалось сохранить изменения. Попробуйте ещё раз."
[Повторить]

Состояние 7: Конец списка
Когда кандидат последний:

После подтверждения:
– Показать:
[ Иконка улыбки / галочка ]
"Все проверки завершены."
"Спасибо! Я всё запомнил."
[ КНОПКА: "На главную" ] [ "К списку вещей" ]

КАРТОЧКА ВЕЩИ – СОСТОЯНИЯ

Состояние 1: Загрузка карточки
При первом открытии:

– Верхний блок скелетон (плашка вместо фото и текста).
– Пара строк-плейсхолдеров вместо параметров.

Если есть кеш – сразу показываем кеш, поверх маленький индикатор:
"Обновляем данные…" вверху/внизу.

Состояние 2: Пустые блоки внутри

Медиа:
Если ещё нет фото/видео:
[ Иконка камеры ]
"Фотографий еще нет."
[ КНОПКА: "Добавить фото" ]

Заметки:
Если нет заметок:
[ Иконка заметки ]
"Заметок пока нет."
[ "+ Добавить заметку" ]

История:
Если история пустая:
"История изменений появится, когда вы начнете редактировать эту вещь."

Состояние 3: Ошибка обновления (перемещение, статус)
При изменении статуса, местоположения:

– Пока сохраняем:
– отображаем мини-индикатор "Сохраняем…" рядом с изменяемым блоком.
– При ошибке:
– возвращаем старое значение;
– показываем тост:
"Не удалось обновить статус. Проверьте соединение."

ПОИСК – СОСТОЯНИЯ

Состояние 1: Пустой запрос
– В строке поиска – плейсхолдер.
– В центральной части:
[ Иконка лупы ]
"Начните поиск по названию, тегам или описанию."
[ КНОПКА: "Поиск по фото" ]

Состояние 2: Загрузка результатов
После ввода текста и нажатия "Поиск":

– Показываем крутящийся индикатор в строке поиска (вместо иконки).
– В списке – skeleton-карточки.

Состояние 3: Нет результатов
[ Иконка коробки с вопросом ]
"Ничего не нашлось."
"Попробуйте изменить запрос или снять фильтры."
[ КНОПКА: "Сбросить фильтры" ]

Состояние 4: Ошибка поиска
[БАННЕР]
"Не удалось выполнить поиск."
[Повторить]

Поиск по фото:

– Состояние отправки:
"Ищем похожие вещи по фото…" + индикатор.
– Если ничего не найдено:
"По этому фото ничего не нашли."
[ КНОПКА: "Создать новую вещь" ]

НАСТРОЙКИ / NAS – СОСТОЯНИЯ

Состояние 1: Проверка подключения
– При нажатии "Проверить подключение":

Строка:
"Проверяем подключение…" + крутилка.

Состояние 2: Успех
– Строка меняется на:
"Подключено к NAS." (зелёная иконка).
– Тост:
"Подключение успешно."

Состояние 3: Ошибка
– "Не удалось подключиться к NAS."
– Под текстом:
"Проверьте адрес, логин/пароль и сеть."
[Повторить]

Состояние 4: Оффлайн
– Если нет интернета:
"Нет доступа к интернету. Подключение к NAS невозможно."
– Настройки NAS недоступны для сохранения/проверки.

МЕСТА – ИЕРАРХИЧЕСКИЙ ЭКРАН – ПУСТЫЕ И ОШИБОЧНЫЕ СОСТОЯНИЯ

Список домов (верхний уровень):

Пустой:
[ Иконка домика с плюсиком ]
"У вас пока нет добавленных мест."
[ КНОПКА: "Добавить дом или объект" ]

Ошибка:
[ Иконка ошибки ]
"Не удалось загрузить список мест."
[Повторить]

Комнаты/шкафы/ящики:

Пустой:
"Здесь пока нет элементов."
[ КНОПКА: "+ Добавить комнату / шкаф / ящик" ]

?????? 2025-12-10:
- ????: ???????? Quick Add, Batch Add, ????? AI-????????, ?????? ???????.
- ? ??????: low-fi ?????? Quick Add ? AI Review, ????? ???????? ?????????.
- ???????: ??? API ????? AI ??????? (???????? ai_detection_reviews), ??? batch_id ? items ??? ?????????? ?????.
